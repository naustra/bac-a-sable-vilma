---
alwaysApply: true
---

# GÃ©nÃ©rateur de documents Ã©ducatifs en macÃ©donien avec IA CLIP

## ğŸ¯ Objectif

CrÃ©er des documents Word (.docx) avec grilles d'images et noms en **macÃ©donien cyrillique**, avec sÃ©lection automatique des meilleures images par **IA CLIP**.

## ğŸ“ Structure

```
bac-a-sable-vilma/
â”œâ”€â”€ create_theme.py                      # ğŸ¨ CrÃ©ateur de thÃ¨mes
â”œâ”€â”€ telecharger_images.py                # ğŸ“¸ TÃ©lÃ©chargeur multi-sources
â”œâ”€â”€ telecharger_images_clip.py           # ğŸ§  TÃ©lÃ©chargeur + scoring CLIP
â”œâ”€â”€ scorer_images_clip.py                # ğŸ§  Module scoring IA CLIP
â”œâ”€â”€ generer_document.py                  # ğŸ“„ GÃ©nÃ©rateur Word
â”œâ”€â”€ telecharger_images_unified.py        # ğŸ”§ Module tÃ©lÃ©chargement
â”œâ”€â”€ config_api.py                        # ğŸ”‘ Configuration APIs
â”œâ”€â”€ convertir_images.py                  # ğŸ”„ Conversion JPEG
â”œâ”€â”€ requirements.txt                     # ğŸ“¦ DÃ©pendances Python
â””â”€â”€ themes/
    â””â”€â”€ {theme}/
        â”œâ”€â”€ config.json                  # Configuration du thÃ¨me
        â”œâ”€â”€ photos/                      # Images tÃ©lÃ©chargÃ©es (10 par Ã©lÃ©ment)
        â”œâ”€â”€ selection.json               # Images sÃ©lectionnÃ©es par CLIP
        â”œâ”€â”€ scoring_report.json          # ğŸ“Š Rapport dÃ©taillÃ© CLIP
        â””â”€â”€ {Theme}.docx                 # Document gÃ©nÃ©rÃ©
```

## ğŸš€ Usage rapide

```bash
# 1. CrÃ©er un thÃ¨me (ex: corps humain)
python create_theme.py corps_humain

# 2. TÃ©lÃ©charger les images (3 options)
python telecharger_images.py corps_humain                    # Multi-sources classique
python telecharger_images_clip.py corps_humain               # Multi-sources + scoring CLIP ğŸ§ 
python scorer_images_clip.py corps_humain                    # Scoring CLIP seulement

# 3. GÃ©nÃ©rer le document Word
python generer_document.py corps_humain

# RÃ©sultat : themes/corps_humain/Ğ”ĞµĞ»Ğ¾Ğ²Ğ¸ Ğ½Ğ° Ñ‚ĞµĞ»Ğ¾Ñ‚Ğ¾.docx
```

## ğŸ§  Scoring CLIP automatique

### Intelligence artificielle pour la sÃ©lection d'images

Le systÃ¨me utilise **CLIP (Contrastive Language-Image Pre-training)** d'OpenAI pour :

- **Analyser** chaque image tÃ©lÃ©chargÃ©e avec le modÃ¨le CLIP
- **Calculer** un score de pertinence (0-1) par rapport au mot anglais
- **SÃ©lectionner** automatiquement l'image avec le meilleur score
- **Optimiser** la vitesse avec traitement par batch (3.7x plus rapide)

**Exemple de sortie :**

```
ğŸ” Scoring images pour chat (Ğ¼Ğ°Ñ‡ĞºĞ°)
   ğŸ“ RequÃªte: 'cat'
   ğŸ“¸ chat_unsplash_3.jpg â†’ Score: 0.956 â­ MEILLEURE
   ğŸ“¸ chat_unsplash_2.jpg â†’ Score: 0.953
   ğŸ“¸ chat_unsplash_1.jpg â†’ Score: 0.950
   ğŸ“¸ chat_pexels_5.jpg â†’ Score: 0.950
   ğŸ“¸ chat_pexels_4.jpg â†’ Score: 0.940
   ğŸ“¸ chat_pexels_6.jpg â†’ Score: 0.932
âœ… SÃ©lectionnÃ©e: chat_unsplash_3.jpg
```

### ğŸ“Š Rapport de scoring dÃ©taillÃ©

Le module gÃ©nÃ¨re automatiquement un fichier `scoring_report.json` avec :

- **Scores dÃ©taillÃ©s** de toutes les images analysÃ©es
- **Classement** par ordre de pertinence
- **Image sÃ©lectionnÃ©e** marquÃ©e
- **Statistiques** complÃ¨tes par Ã©lÃ©ment

## ğŸ“ TÃ©lÃ©chargement multi-sources

### 4 sources automatiques

```python
from telecharger_images_unified import MultiSourceImageDownloader

downloader = MultiSourceImageDownloader()
downloader.download_for_theme("corps_humain")
```

**Sources disponibles :**

- âœ… **Unsplash** - Photos haute qualitÃ© (clÃ© API requise)
- âœ… **Pexels** - Images libres de droits (clÃ© API requise)
- âœ… **Wikipedia** - Images Ã©ducatives (gratuit)
- âœ… **Wikimedia Commons** - Domaine public (gratuit)

**Avantages :**

- âœ… **10 images par Ã©lÃ©ment** (configurable)
- âœ… **ParallÃ©lisme** : 20+ tÃ©lÃ©chargements simultanÃ©s
- âœ… **Libres de droits** - Domaine public / Creative Commons
- âœ… **Filtre automatique** - Seulement JPG/PNG < 10 MB

## ğŸ¯ Bonnes pratiques pour les requÃªtes

**Mots simples et descriptifs :**

- âœ… `"human eye close up"` - Photos naturelles
- âœ… `"human hand fingers"` - Images claires
- âœ… `"macedonian ajvar food"` - Plats traditionnels

**Ã€ Ã©viter :**

- âŒ `"anatomy medical diagram"` - Trop mÃ©dical
- âŒ `"abstract illustration"` - Trop abstrait

## ğŸ“‹ Configuration d'un thÃ¨me

### Fichier `themes/{nom_theme}/config.json` :

```json
{
  "theme": "corps_humain",
  "titre": "Ğ”ĞµĞ»Ğ¾Ğ²Ğ¸ Ğ½Ğ° Ñ‚ĞµĞ»Ğ¾Ñ‚Ğ¾",
  "colonnes": 3,
  "images_par_element": 10,
  "elements": [
    {
      "mot_anglais": "head",
      "nom_francais": "tete",
      "nom_macedonien": "Ğ³Ğ»Ğ°Ğ²Ğ°"
    },
    {
      "mot_anglais": "eye",
      "nom_francais": "oeil",
      "nom_macedonien": "Ğ¾ĞºĞ¾"
    }
  ]
}
```

### Fichier `themes/{nom_theme}/selection.json` (gÃ©nÃ©rÃ© par CLIP) :

```json
{
  "theme": "corps_humain",
  "titre": "Ğ”ĞµĞ»Ğ¾Ğ²Ğ¸ Ğ½Ğ° Ñ‚ĞµĞ»Ğ¾Ñ‚Ğ¾",
  "colonnes": 3,
  "elements": [
    {
      "nom_macedonien": "Ğ³Ğ»Ğ°Ğ²Ğ°",
      "nom_francais": "tete",
      "image_selectionnee": "tete_pexels_4.jpg"
    },
    {
      "nom_macedonien": "Ğ¾ĞºĞ¾",
      "nom_francais": "oeil",
      "image_selectionnee": "oeil_unsplash_3.jpg"
    }
  ]
}
```

## ğŸ¨ ThÃ¨mes disponibles

### Corps humain

```bash
python create_theme.py corps_humain
python telecharger_images_clip.py corps_humain
python generer_document.py corps_humain
```

### MÃ©tÃ©o

```bash
python create_theme.py meteo
python telecharger_images_clip.py meteo
python generer_document.py meteo
```

### Animaux

```bash
python create_theme.py animaux
python telecharger_images_clip.py animaux
python generer_document.py animaux
```

## âš¡ Performance

- **Multi-sources** : 4.3 secondes pour 10 mots Ã— 10 images = 100 images
- **ParallÃ©lisme** : 20+ tÃ©lÃ©chargements simultanÃ©s
- **Scoring CLIP optimisÃ©** : Traitement par batch de 4 images (3.7x plus rapide)
- **Sources variÃ©es** : Unsplash + Pexels + Wikipedia + Wikimedia Commons ğŸš€

## ğŸ“¦ DÃ©pendances

```bash
pip install python-docx>=0.8.11 requests>=2.31.0 Pillow>=10.0.0 torch>=2.0.0 transformers>=4.30.0
```
